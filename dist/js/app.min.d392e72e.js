!function(){angular.module("app",["appControllers","appDirectives","appServices","appFilters"])}(),function(){var a=angular.module("appControllers",[]);a.controller("CityController",["$scope","$http",function(a,b){$.ajax({method:"GET",url:"/100du/app/api.php",data:{args:"city"},dataType:"json"}).done(function(b){a.cities=b}),a.index=0,a.select=function(b){a.index=b}}]),a.controller("MainNavController",["$scope",function(a){a.navs1=["美食","夜店","购物","文化","休闲"],a.navs2=["烧客空间","知道分子","白吃白拿","烧客论坛","企业俱乐部"],a.select=function(b){a.curNav=b},a.curNav=a.navs1[0]}]),a.controller("SearchNavController",["$scope",function(a){a.navs=["搜店","地址","优惠卷","全文","视频"],a.index=0,a.select=function(b){a.index=b}}]),a.controller("BBSController",["$scope",function(a){$.ajax({method:"GET",url:"/100du/app/api.php",data:{args:"BBS"},dataType:"json"}).done(function(b){a.items=b}),a.order=["ONE","TWO","THREE","FOUR","FIVE","SIX","SEVEN"],a.index=0,a.mouseEnter=function(b){a.index=b}}]),a.controller("DayController",["$scope",function(a){var b=new Date;a.yd=b.getFullYear()+"."+(b.getMonth()+1),a.m=b.getMonth()+1,a.d=b.getDate()}]),a.controller("RecommendController",["$scope",function(a){$.ajax({method:"GET",url:"/100du/app/api.php",data:{args:"recommend"},dataType:"json"}).done(function(b){a.imgs=b}),a.index=0,a.mouseEnter=function(b){a.index=b}}])}(),function(){var a=angular.module("appDirectives",[]);a.directive("toggle",function(){var a={};return a.restrict="A",a.scope={defaultValue:"@value"},a.link=function(a,b,c){b.on("focus",function(){b.val()==a.defaultValue&&b.val("")}),b.on("blur",function(){""==b.val()&&b.val(a.defaultValue)})},a}),a.directive("verticalScroll",["$timeout",function(a){var b={};return b.restrict="AE",b.scope={},b.templateUrl="tpl/vertical_scroll.html",b.link=function(b,c,d){function e(){j=setInterval(f,3e3)}function f(){n>=h&&(m.css("top",0),n=0),n++,o=-n*i+"px",m.animate({top:o},500,function(){p=!0,null==j&&e()})}function g(){n<=0&&(n=h,m.css("top",-n*i)),n--,o=-n*i+"px",m.animate({top:o},500,function(){p=!0,null==j&&e()})}$.ajax({method:"GET",url:"/100du/app/api.php",data:{args:"update"},dataType:"json"}).done(function(c){b.items=c,a(function(){i=parseInt(m.find("a").eq(0).height()),h=m.find("a").length,m.html(m.html()+m.html()),e()},500)});var h,i,j,k=c.find(".triangle-up").eq(0),l=c.find(".triangle-down-red").eq(0),m=c.find(".wrap").eq(0),n=0,o=n*i,p=!0;k.on("click",function(){clearInterval(j),j=null,p&&(p=!1,f())}),l.on("click",function(){clearInterval(j),j=null,p&&(p=!1,g())}),m.on("mouseenter",function(){clearInterval(j),j=null}).on("mouseleave",function(){e()})},b}]),a.directive("tab",function(){return{restrict:"E",scope:{},transclude:!0,controller:["$scope",function(a){var b=a.panes=[];a.select=function(a){$.each(b,function(a,b){b.selected=!1}),a.selected=!0},this.addPane=function(a){0==b.length&&(a.selected=!0),b.push(a)}}],templateUrl:function(a,b){return"tpl/tab_"+b.tpl+".html"}}}).directive("pane",function(){return{restrict:"E",scope:{title:"="},require:"^^tab",transclude:!0,link:function(a,b,c,d){d.addPane(a)},templateUrl:"tpl/pane.html"}}),a.directive("day",function(){return{restrict:"A",link:function(a,b,c){var d='\t\t\t\t\t<img src="img/content/main/section_3/product_1.png" class="sm-product today"/>\t\t\t\t\t<div class="info">\t\t\t\t\t\t<img src="img/content/main/section_3/product_1.png"/>\t\t\t\t\t\t<span>MON</span>\t\t\t\t\t\t<strong>本日主题XXXXXXXX</strong>\t\t\t\t\t\t<p>迟到的荣誉-维米尔的写实主义风俗画迟到的荣的荣誉维米尔</p>\t\t\t\t\t</div>\t\t\t\t\t',e='\t\t\t\t\t<img src="img/content/main/section_3/product_2.png" class="sm-product"/>\t\t\t\t\t<div class="info">\t\t\t\t\t\t<img src="img/content/main/section_3/product_2.png"/>\t\t\t\t\t\t<span>MON</span>\t\t\t\t\t\t<strong>本日主题XXXXXXXX</strong>\t\t\t\t\t\t<p>迟到的荣誉-维米尔的写实主义风俗画迟到的荣的荣誉维米尔</p>\t\t\t\t\t</div>\t\t\t\t\t',f=new Date,g=f.getDate();f.setDate(1);var h=f.getDay();f=new Date;for(var i=new Date(f.getFullYear(),f.getMonth()+1,0).getDate(),j=new Date(f.getFullYear(),f.getMonth(),0).getDate(),k="",l=1;l<=42;l++)l<h&&(k+='<li class="light">'+(j-(h-l-1))+"</li>"),l>=h&&l<=i+h-1&&(k+=l-h+1==g?"<li>"+(l-h+1)+d+"</li>":l-h+1==8?"<li>"+(l-h+1)+e+"</li>":"<li>"+(l-h+1)+"</li>"),l>i+h-1&&(k+='<li class="light">'+(l-i-(h-1))+"</li>");b.html(k)}}}),a.directive("logoTurn",["$timeout","toolsService",function(a,b){return{restrict:"A",link:function(a,c,d){if(b.isIE())return void $(c).html('<img src="img/main_nav/logo.png" alt="100du" title="100du" id="fixIE-logo" />');for(var e=$("#logoList"),f="",g="",h=20,i=parseInt(e.width()/h),j=0,k=0;k<i;k++)k>=i/2?j--:j++,f+='<li>\t        \t\t\t<a href="#"></a>\t        \t\t\t<a href="#"></a>\t        \t\t\t<a href="#"></a>\t        \t\t\t<a href="#"></a>\t        \t\t\t<span></span>\t        \t\t\t<span></span>\t        \t\t</li>',g+=" .main-nav #logoList li:nth-of-type("+(k+1)+") a {\t\t\t\t\t\t\t\tbackground-position: -"+k*h+"px 0;\t\t\t\t\t\t\t}",g+=" .main-nav #logoList li:nth-of-type("+(k+1)+") { z-index:"+j+";}";var l=0;e.html(f);var m=$("#logoList li");$("#css").html($("#css").html()+g),setInterval(function(){l++,m.each(function(a){$(this).css("transition","0.5s "+50*a+"ms"),$(this).css("transform","rotateX(-"+90*l+"deg)")})},3e3)}}}]),a.directive("charactersJump",["$timeout",function(a){return{restrict:"A",scope:{},link:function(a,b,c){var d=$(b).html().trim();$(b).css("width",Math.ceil($(b).width())),$(b).css("height",Math.ceil($(b).height())),$(b).css("display","block"),$(b).html("");for(var e=0;e<d.length;e++)$(b).html($(b).html()+"<span>"+d[e]+"</span>");var f=$(b).children(),g="";f.each(function(a,b){$(this).css("left",$(this).position().left),$(this).css("top",$(this).position().top),g+="#"+c.id+" span:nth-of-type("+(a+1)+").active {\t\t\t\t\t\tanimation: .4s "+.15*a+"s charactersJump linear;\t\t\t\t\t}"}),$("#css").html($("#css").html()+g),f.each(function(a,b){$(this).css("position","absolute"),$(this).addClass("active");var c=this;setInterval(function(){$(c).addClass("active")},2e3),$(this).on("animationend",function(){$(this).removeClass("active")})})}}}]),a.directive("mainNavRotate",["$timeout",function(a){return{restrict:"A",link:function(b,c,d){function e(){var b=$(c).find(".left a"),d=$(c).find(".right a");b.each(function(){$(this).addClass("rotate")}),d.each(function(){$(this).addClass("rotate")}),a(function(){b.each(function(){$(this).removeClass("rotate")}),d.each(function(){$(this).removeClass("rotate")})},8e3)}a(function(){e()},0),setInterval(function(){e()},1e4)}}}])}(),function(){var a=angular.module("appServices",[]);a.service("toolsService",function(){this.isIE=function(){return!!(window.ActiveXObject||"ActiveXObject"in window)}})}(),function(){var a=angular.module("appFilters",[]);a.filter("addZero",function(){return function(a){return a<10?"0"+a:a}})}();